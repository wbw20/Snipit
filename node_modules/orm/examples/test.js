var orm = require("../lib/ORM");

orm.connect("postgres://dresende@localhost:/orm_test", function (err, db) {
// orm.connect("mysql://root:tedua@localhost/orm", function (err, db) {
	if (err) {
		throw err;
	}

	var Pet = db.define("pet", {
		name      : String,
		type      : [ "dog", "cat", "fish" ]
	});
	var Person = db.define("person", {
		name      : String,
		surname   : String,
		age       : Number,
		male      : Boolean,
		dt        : Date,
		photo     : Buffer
	});
	// Pet.hasOne("owner", Person, { autoFetch: true, reverse: "pets" });
	Person.hasMany("pets", Pet);

	(new Person({
		name: "Josh",
		surname: "Doe"
	})).save(function (err, John) {
		console.log(John.id, John);
	});
	return;

	var n = orm.between(15, 20);
	console.log(n);
	console.log(typeof n.orm_special_object);
	console.log(n.orm_special_object());

	Person.find({ age: orm.between(19, 20) }, function (err, people) {
		console.log(err, people);
	});
});
